<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Welcome ðŸ’–</title>

<style>
body{
  margin:0;
  height:100vh;
  font-family:'Segoe UI',sans-serif;
  background:#ffd6e8;
  display:flex;
  justify-content:center;
  align-items:center;
  text-align:center;
  overflow:hidden;
  color:#4a0033;
}

.screen{display:none;}
.active{display:block;}

h1{font-size:38px;}

.caption{
  font-size:18px;
  margin-top:15px;
}

.btn{
  margin-top:20px;
  padding:14px 40px;
  font-size:20px;
  border:none;
  border-radius:30px;
  background:linear-gradient(45deg,#ff4d6d,#ff7aa2);
  color:white;
  cursor:pointer;
  animation:pulse 1.5s infinite;
}

@keyframes pulse{
  0%{transform:scale(1);}
  50%{transform:scale(1.08);}
  100%{transform:scale(1);}
}

/* TYPEWRITER */
#line{
  font-size:25px;
  min-height:45px;
  margin:20px 0;
  position:relative;
  z-index:2;
  color:#3b0020;
  font-weight:700;
}

/* FLOATING HEARTS */
.heart{
  position:absolute;
  bottom:-40px;
  font-size:20px;
  color:#b3005e;
  opacity:0.6;
  animation:floatUp linear;
  z-index:1;
}

@keyframes floatUp{
  0%{transform:translateY(0) scale(1);opacity:0;}
  20%{opacity:0.6;}
  100%{transform:translateY(-110vh) scale(1.3);opacity:0;}
}

/* SLIDESHOW */
#slideshow{
  position:fixed;
  inset:0;
  background:black;
}

.slide{
  position:absolute;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
  opacity:0;
  transition:opacity 1s ease;
}

.slide img{
  max-width:100%;
  max-height:100%;
  object-fit:contain;
}

.slide.active{opacity:1;}
</style>
</head>

<body>

<!-- SCREEN 1 -->
<div id="screen1" class="screen active">
  <h1>Welcome ðŸ’•</h1>

  <div id="continueBox" style="display:none;">
    <div class="caption">Hold your excitement and press continue</div>
    <button class="btn" onclick="goContinue()">Continue</button>
  </div>
</div>

<!-- SCREEN 2 -->
<div id="screen2" class="screen">
  <div id="line"></div>

  <div id="startBox" style="display:none;">
    <div class="caption">Click start to enter into the Pavanâ€™s world</div>
    <button class="btn" onclick="startShow()">Start</button>
  </div>
</div>

<!-- SLIDESHOW -->
<div id="slideshow" class="screen"></div>

<audio id="song" src="song.mp3" preload="auto"></audio>

<script>
/* CONTINUE DELAY */
setTimeout(()=>{
  document.getElementById("continueBox").style.display="block";
},3500);

function goContinue(){
  screen1.classList.remove("active");
  screen2.classList.add("active");
  startTyping();
}

/* HEARTS */
let heartInterval=null;

function startHearts(){
  if(heartInterval) return;

  heartInterval=setInterval(()=>{
    if(Math.random()>0.15) return;

    const h=document.createElement("div");
    h.className="heart";
    h.innerHTML="ðŸ’–";
    h.style.left=(5+Math.random()*90)+"vw";
    h.style.fontSize=(16+Math.random()*6)+"px";
    h.style.animationDuration=(8+Math.random()*4)+"s";
    document.body.appendChild(h);

    setTimeout(()=>h.remove(),14000);
  },120);
}

function stopHearts(){
  clearInterval(heartInterval);
  heartInterval=null;
  document.querySelectorAll(".heart").forEach(h=>h.remove());
}

/* LINES */
const lines=[
"Hi madhu ala vunnav nikku ami nuvvu bane vunatav le",
"Anthi edhu msg cheyadam ledhu marchipoyadu ani anukuntunnava",
"Alanti alochanalu avaina vunthe delete chesey ok na",
"Eroju Propose Day kadha nikku teluso ledho ðŸ˜…",
"So...",
"HAPPY PROPOSE DAY ðŸŒ¹",
"LOVE YOU SO MUCH â¤ï¸",
"Every heartbeat feels special when I think about you ðŸ’•"
];

let li=0, ci=0;
const lineDiv=document.getElementById("line");

function startTyping(){
  startHearts();

  if(li>=lines.length){
    stopHearts();
    document.getElementById("startBox").style.display="block";
    return;
  }

  if(ci<lines[li].length){
    lineDiv.innerHTML+=lines[li].charAt(ci++);
    setTimeout(startTyping,90);
  }else{
    setTimeout(()=>{
      lineDiv.innerHTML="";
      ci=0; li++;
      startTyping();
    },1600);
  }
}

/* ===== STABLE PHOTO + SONG SYNC ===== */
function startShow(){
  stopHearts();

  screen2.classList.remove("active");
  slideshow.classList.add("active");

  const song=document.getElementById("song");
  song.pause();
  song.currentTime=0;

  const slides=[];
  let i=1;

  function loadImage(){
    const img=new Image();
    img.src=`photo${i}.jpg`;
    img.onload=()=>{
      const d=document.createElement("div");
      d.className="slide";
      d.appendChild(img);
      slideshow.appendChild(d);
      slides.push(d);
      i++;
      loadImage();
    };
  }
  loadImage();

  // WAIT until images loaded properly
  setTimeout(()=>{
    if(slides.length===0) return;

    let index=0;
    slides[0].classList.add("active");

    song.play().catch(()=>{});

    const interval=setInterval(()=>{
      slides[index].classList.remove("active");
      index++;
      if(index>=slides.length){
        clearInterval(interval);
        song.pause();
        song.currentTime=0;
      }else{
        slides[index].classList.add("active");
      }
    },4000);

  },1200);
}
</script>

</body>
</html>
